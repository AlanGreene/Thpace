!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("delaunator")):"function"==typeof define&&define.amd?define(["delaunator"],i):(t=t||self).Thpace=i(t.Delaunator)}(this,(function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function a(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}function s(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}t=t&&t.hasOwnProperty("default")?t.default:t;var n={triangleSize:130,bleed:95,noise:60,color1:"#0b8793",color2:"#360033",pointVariationX:20,pointVariationY:35,pointAnimationSpeed:7500,image:!1,imageOpacity:.4},h=function(){function e(t,a){i(this,e),s(this,"canvas",void 0),s(this,"ctx",void 0),s(this,"settings",void 0),s(this,"width",void 0),s(this,"height",void 0),s(this,"triangles",void 0),s(this,"particles",void 0),s(this,"coordinateTable",void 0),s(this,"baseCoordinateTable",void 0),s(this,"delta",void 0),s(this,"lastUpdate",void 0),this.canvas=t,this.settings=a,this.ctx=t.getContext("2d"),this.width=0,this.height=0,this.delta=performance.now(),this.lastUpdate=performance.now(),this.triangles=[],this.particles=[],this.coordinateTable={},this.baseCoordinateTable={},window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.animate()}return a(e,null,[{key:"create",value:function(t,i){if(t)return new e(t,Object.assign({},n,i));console.warn("Need a valid canvas element!")}}]),a(e,[{key:"resize",value:function(){var t=this.canvas.parentElement;t&&(this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight),this.width===this.canvas.width&&this.height===this.canvas.height||(this.width=this.canvas.width,this.height=this.canvas.height,this.generateTriangles(),this.generateParticles())}},{key:"remove",value:function(){window.removeEventListener("resize",this.resize.bind(this))}},{key:"generateTriangles",value:function(){var i=this,e=[],a={};e.push([0,0]),e.push([0,this.height]),e.push([this.width,0]),e.push([this.width,this.height]);for(var s=this.settings.bleed||0,n=this.settings.triangleSize||0,h=this.settings.noise||0,r=this.settings.color1||"",d=this.settings.color2||"",u=0-s;u<this.width+s;u+=n)for(var f=0-s;f<this.height+s;f+=n){var v=u+c(0,h),g=f+c(0,h);e.push([v,g])}for(var p=t.from(e).triangles,y=[],b=0;b<p.length;b+=3){var x=[e[p[b]],e[p[b+1]],e[p[b+2]]],m=[];m.push({x:x[0][0],y:x[0][1]}),m.push({x:x[1][0],y:x[1][1]}),m.push({x:x[2][0],y:x[2][1]});var w=o(l(m),this.width,this.height,r,d);x.push(w),y.push(x)}var T={};y.forEach((function(t){t.forEach((function(t){var e=t[0],s=t[1];a[e]||(a[e]={});var n=e/i.width;a[e][s]=0,T[e]||(T[e]={}),T[e][s]=2*n*Math.PI}))})),this.triangles=y,this.coordinateTable=a,this.baseCoordinateTable=T}},{key:"generateParticles",value:function(){for(var t=[],i=0;i<250;i++){var e={ctx:this.ctx,width:this.width,height:this.height};t.push(new r(e))}this.particles=t}},{key:"animate",value:function(){var t=this,i=this.ctx;if(i.clearRect(0,0,this.width,this.height),this.triangles.forEach((function(e){i.beginPath();var a=[];a.push({x:e[0][0],y:e[0][1]}),a.push({x:e[1][0],y:e[1][1]}),a.push({x:e[2][0],y:e[2][1]});var s=e[3];i.fillStyle=s,i.strokeStyle=s;[0,1,2,0].forEach((function(e,s){if(t.coordinateTable[a[e].x]&&null!=t.coordinateTable[a[e].x][a[e].y]){var n={x:a[e].x,y:a[e].y},h=t.coordinateTable[a[e].x][a[e].y];0==s?i.moveTo(n.x+h.x,n.y+h.y):i.lineTo(n.x+h.x,n.y+h.y)}})),i.fill(),i.stroke()})),this.particles.forEach((function(t){t.update()})),this.particles.forEach((function(t){t.draw()})),this.settings.image){var e=this.settings.imageOpacity||0,a=i.createPattern(this.settings.image,"repeat");a&&(i.globalAlpha=e,i.fillStyle=a,i.fillRect(0,0,this.width,this.height),i.globalAlpha=1)}this.animateCoordinateTable(),this.delta=performance.now()-this.lastUpdate,this.lastUpdate=performance.now(),requestAnimationFrame(this.animate.bind(this))}},{key:"animateCoordinateTable",value:function(){var t=this,i=this.settings.pointAnimationSpeed||0,e=this.settings.pointVariationX||0,a=this.settings.pointVariationY||0;Object.keys(this.coordinateTable).forEach((function(s){Object.keys(t.coordinateTable[s]).forEach((function(n){t.baseCoordinateTable[s][n]+=t.delta/(i/1.5)*4;var h=Math.cos(t.baseCoordinateTable[s][n])*e,r=Math.sin(t.baseCoordinateTable[s][n])*a;t.coordinateTable[s][n]={x:h,y:r}}))}))}}]),e}(),r=function(){function t(e){i(this,t),s(this,"ctx",void 0),s(this,"x",void 0),s(this,"y",void 0),s(this,"ox",void 0),s(this,"oy",void 0),s(this,"interval",void 0),s(this,"limit",void 0),s(this,"opacity",void 0),s(this,"r",void 0),this.ctx=e.ctx,this.x=c(0,e.width),this.y=c(0,e.height),this.ox=this.x,this.oy=this.y,this.interval=c(1e3,5e3),this.limit=c(5,15),this.opacity=d(.1,.7),this.r=d(1,2)}return a(t,[{key:"update",value:function(){this.x=this.ox+Math.cos(performance.now()/this.interval)*this.limit,this.y=this.oy+Math.sin(performance.now()/this.interval)*this.limit/2}},{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.r,0,2*Math.PI),this.ctx.fillStyle="rgba(255,255,255, "+this.opacity+")",this.ctx.fill()}}]),t}();function o(t,i,e,a,s){var n=t.x,h=0;(h=(t.y/e+(h=n/i))/2)>1?h=1:h<0&&(h=0);var r=function(t){var i=t.toString(16);return 1==i.length?"0"+i:i},o=Math.ceil(parseInt(s.substring(1,3),16)*h+parseInt(a.substring(1,3),16)*(1-h)),l=Math.ceil(parseInt(s.substring(3,5),16)*h+parseInt(a.substring(3,5),16)*(1-h)),c=Math.ceil(parseInt(s.substring(5,7),16)*h+parseInt(a.substring(5,7),16)*(1-h));return"#"+r(o)+r(l)+r(c)}function l(t){var i=0,e=0;return t.forEach((function(t){i+=t.x,e+=t.y})),{x:i/t.length,y:e/t.length}}function c(t,i){return Math.floor(Math.random()*(i-t+1))+t}function d(t,i){return Math.random()*(i-t)+t}return h}));
